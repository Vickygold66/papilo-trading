<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PapiloTrade - P2P Gift Card & Crypto Marketplace</title>
    <link href="https://fonts.googleapis.com/css?family=Inter:400,600,700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', Arial, sans-serif;
            background: linear-gradient(135deg, #fff 0%, #f5e9da 40%, #e3f2fd 100%);
            margin: 0;
            color: #222;
        }
        header {
            background: #fff;
            border-bottom: 2px solid #e3f2fd;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.2rem 2rem;
        }
        .logo {
            font-size: 2rem;
            font-weight: 700;
            color: #1976d2;
            letter-spacing: 1px;
        }
        nav {
            display: flex;
            gap: 1.2rem;
        }
        nav button, .cta-btn {
            background: #1976d2;
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 0.7rem 1.3rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        nav button:hover, .cta-btn:hover {
            background: #a67c52;
        }
        .section {
            max-width: 1100px;
            margin: 2.5rem auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 16px rgba(30, 64, 175, 0.07);
            padding: 2rem 2.5rem;
        }
        h1, h2 {
            color: #1976d2;
            margin-bottom: 0.7rem;
        }
        .highlight {
            color: #a67c52;
            font-weight: 700;
        }
        .market-table {
            width: 100%;
            border-collapse: collapse;
            background: #f9f9f9;
        }
        .market-table th, .market-table td {
            padding: 0.7rem;
            border-bottom: 1px solid #e0e0e0;
        }
        .market-table th {
            background: #e3f2fd;
        }
        .market-table tr:last-child td {
            border-bottom: none;
        }
        .escrow-note {
            margin-top: 1.2rem;
            color: #d32f2f;
            font-weight: 600;
        }
        .referral-box {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 1.2rem;
            margin: 1.5rem 0;
        }
        .contact-info {
            margin-top: 1.2rem;
            font-size: 1.1rem;
        }
        .dashboard {
            display: none;
            margin-top: 2rem;
        }
        .dashboard.active {
            display: block;
        }
        .bank-list, .withdraw-section {
            margin: 1rem 0;
        }
        .bank-list ul {
            padding-left: 1.2rem;
        }
        .trusted-badge {
            background: #a67c52;
            color: #fff;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            margin-left: 1rem;
        }
        .admin-panel {
            background: #f3f3f3;
            border-radius: 8px;
            padding: 1.2rem;
            margin: 1.5rem 0;
            border: 1px solid #1976d2;
        }
        .timer {
            color: #d32f2f;
            font-weight: bold;
        }
        @media (max-width: 700px) {
            .section { padding: 1rem; }
            header { flex-direction: column; gap: 1rem; }
        }
    </style>
</head>
<body>
    <header>
        <span class="logo">PapiloTrade <span class="trusted-badge">Trusted & Secure</span></span>
        <nav>
            <button onclick="showSection('home')">Home</button>
            <button onclick="showSection('p2p-marketplace')">P2P Marketplace</button>
            <button onclick="showSection('about')">About</button>
            <button onclick="showSection('contact')">Contact Us</button>
            <button onclick="showSection('referral')">Referral</button>
            <button onclick="showSection('signup')<form id="signupForm" onsubmit="return verifyOtp()">
  <input type="text" id="phoneNumber" placeholder="Enter phone/email" required><br>
  <button type="button" onclick="sendOtp()">Get OTP</button><br><br><input type="text" id="otpInput" placeholder="Enter OTP" required><br>
  <button type="submit">Verify & Login</button>
</form></button>
">sign up</button>
            <button onclick="showSection('login')"<input type="text" id="otpInput" placeholder="Enter OTP" required><br>
  <button type="submit">Verify & Login</button>
</form></button>login</button>
            <button id="logoutBtn" onclick="logout()" style="display:none;">Logout</button>
            <button id="adminBtn" onclick="showSection('admin')" style="display:none;">Admin</button>
        </nav>
    </header>

    <!-- Home Section -->
    <section class="section" id="home">
        <h1>Trade Gift Cards & Crypto Worldwide</h1>
        <p>
            Welcome to <span class="highlight">PapiloTrade</span>, the most trusted platform to buy and sell gift cards and cryptocurrencies from any country. Earn <span class="highlight">15%</span> on every trade. Buy with crypto, sell for cash, and enjoy a secure P2P marketplace with escrow protection.
        </p>
        <div style="margin:1.5rem 0;">
            <button class="cta-btn" onclick="showSection('p2p-marketplace')">P2P Marketplace</button>
            <button class="cta-btn" onclick="showSection('referral')">Referral Program</button>
        </div>
        <div class="referral-box">
            <strong>Refer & Earn:</strong> Invite friends and family and earn <span class="highlight">3%</span> on every trade your referees make!
            <br>
            <button class="cta-btn" onclick="showSection('referral')">Get Referral Link</button>
        </div>
    </section>

    <!-- P2P Marketplace Section -->
    <section class="section" id="p2p-marketplace" style="display:none;">
        <h2>P2P Marketplace</h2>
        <p>
            List your gift cards or crypto for sale at your own price. Buyers can choose their preferred seller and pay using the seller's accepted payment methods. All trades are protected by escrow and must be completed within <span class="highlight">20 minutes</span>. Platform charges a <span class="highlight">15%</span> fee per trade.
        </p>
        <button class="cta-btn" onclick="showListForm()">List Crypto/Gift Card for Sale</button>
        <div id="listForm" style="display:none; margin:1rem 0;">
            <form onsubmit="listOffer(event)">
                <input type="text" id="asset" placeholder="Asset (e.g. USDT, Amazon GC)" required style="padding:0.5rem; margin-bottom:0.5rem; width:200px;">
                <input type="number" id="amount" placeholder="Amount" required style="padding:0.5rem; margin-bottom:0.5rem; width:120px;">
                <input type="text" id="rate" placeholder="Rate (e.g. â‚¦1500/$)" required style="padding:0.5rem; margin-bottom:0.5rem; width:140px;">
                <input type="text" id="payment" placeholder="Payment Methods (comma separated)" required style="padding:0.5rem; margin-bottom:0.5rem; width:220px;">
                <button class="cta-btn" type="submit">List Offer</button>
            </form>
        </div>
        <table class="market-table" id="offersTable">
            <thead>
                <tr>
                    <th>Seller</th>
                    <th>Asset</th>
                    <th>Amount</th>
                    <th>Rate</th>
                    <th>Payment Methods</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Offers will be dynamically inserted here -->
            </tbody>
        </table>
        <div class="escrow-note" style="margin-top:1rem;">
            All trades are protected by escrow. Complete payment and confirm within <span class="highlight">20 minutes</span> or the trade will be cancelled automatically.
        </div>
        <button class="cta-btn" style="margin-top:1.5rem;" onclick="contactCEO()">Contact CEO to Buy Directly</button>
    </section>

    <!-- Referral Section -->
    <section class="section" id="referral" style="display:none;">
        <h2>Referral Program</h2>
        <p>
            Share your referral link and earn <span class="highlight">3%</span> on every trade your referees make!
        </p>
        <input type="text" id="refLink" value="https://papilotrade.com/ref?user=papilotrade" readonly style="width:80%;padding:0.5rem;">
        <button class="cta-btn" onclick="copyReferral()">Copy Link</button>
        <div id="copyMsg" style="color:green;margin-top:0.7rem;display:none;">Copied!</div>
    </section>

    <!-- About Section -->
    <section class="section" id="about" style="display:none;">
        <h2>About PapiloTrade</h2>
        <p>
            PapiloTrade is founded by <span class="highlight">Omowaye Victor</span> (CEO), providing a secure, professional, and global platform for trading gift cards and cryptocurrencies. Our system ensures:
        </p>
        <ul>
            <li>15% gain on every trade for the platform</li>
            <li>3% referral bonus on every trade made by your referees</li>
            <li>Escrow-protected P2P marketplace to prevent scams</li>
            <li>Buy gift cards with crypto and vice versa, connected to eligible platforms</li>
            <li>Direct selling to admin (CEO) option</li>
            <li>Withdrawal and bank management for all users</li>
        </ul>
    </section>

    <!-- Contact Section -->
    <section class="section" id="contact" style="display:none;">
        <h2>Contact Us</h2>
        <div class="contact-info">
            <strong>Phone:</strong> +2347013384963<br>
            <strong>Email:</strong> tvic5321@gmail.com<br>
            <strong>CEO:</strong> Omowaye Victor
        </div>
    </section>

    <!-- Login Section -->
    <section class="section" id="login" style="display:none;">
        <h2>Login</h2>
        <form onsubmit="login(event)">
            <input type="text" id="loginUser" placeholder="Username" required style="padding:0.5rem;width:60%;margin-bottom:0.7rem;"><br>
            <input type="password" id="loginPass" placeholder="Password" required style="padding:0.5rem;width:60%;margin-bottom:0.7rem;"><br>
            <input type="text" id="loginOTP" placeholder="Enter OTP (sent to email/phone)" required style="padding:0.5rem;width:60%;margin-bottom:0.7rem;"><br>
            <button class="cta-btn" type="submit">Login</button>
        </form>
        <div id="otpMsg" style="color:green;display:none;">OTP sent to your email/phone.</div>
    </section>

    <!-- Signup Section -->
    <section class="section" id="signup" style="display:none;">
        <h2>Sign Up</h2>
        <form onsubmit="signup(event)">
            <input type="text" id="signupUser" placeholder="Username" required style="padding:0.5rem;width:60%;margin-bottom:0.7rem;"><br>
            <input type="email" id="signupEmail" placeholder="Email" required style="padding:0.5rem;width:60%;margin-bottom:0.7rem;"><br>
            <input type="text" id="signupPhone" placeholder="Phone Number" required style="padding:0.5rem;width:60%;margin-bottom:0.7rem;"><br>
            <input type="password" id="signupPass" placeholder="Password" required style="padding:0.5rem;width:60%;margin-bottom:0.7rem;"><br>
            <input type="text" id="signupOTP" placeholder="Enter OTP (sent to email/phone)" required style="padding:0.5rem;width:60%;margin-bottom:0.7rem;"><br>
            <button class="cta-btn" type="submit">Sign Up</button>
        </form>
        <div id="signupOtpMsg" style="color:green;display:none;">OTP sent to your email/phone.</div>
    </section>

    <!-- User Dashboard (after login) -->
    <section class="section dashboard" id="dashboard">
        <h2>Welcome, <span id="userDisplay"></span></h2>
        <div>
            <button class="cta-btn" onclick="showBank()">Add Bank</button>
            <button class="cta-btn" onclick="showWithdraw()">Withdraw</button>
        </div>
        <div class="bank-list" id="bankList" style="display:none;">
            <h3>Your Banks</h3>
            <ul id="banks"></ul>
            <form onsubmit="addBank(event)">
                <input type="text" id="bankName" placeholder="Bank Name" required style="padding:0.5rem;">
                <input type="text" id="bankAcc" placeholder="Account Number" required style="padding:0.5rem;">
                <button class="cta-btn" type="submit">Add Bank</button>
            </form>
        </div>
        <div class="withdraw-section" id="withdrawSection" style="display:none;">
            <h3>Withdraw Funds</h3>
            <form onsubmit="withdraw(event)">
                <input type="number" id="withdrawAmount" placeholder="Amount" required style="padding:0.5rem;">
                <select id="withdrawBank" required style="padding:0.5rem;">
                    <option value="">Select Bank</option>
                </select>
                <button class="cta-btn" type="submit">Withdraw</button>
            </form>
        </div>
    </section>

    <!-- Admin Panel (CEO/Business Account) -->
    <section class="section admin-panel" id="admin" style="display:none;">
        <h2>Business Account (CEO Panel)</h2>
        <p>View all trades, platform earnings, and manage users.</p>
        <div>
            <strong>Total Platform Earnings:</strong> <span id="platformEarnings">â‚¦0</span>
        </div>
        <div style="margin-top:1rem;">
            <h3>All Trades</h3>
            <table class="market-table" id="allTradesTable">
                <thead>
                    <tr>
                        <th>Trade ID</th>
                        <th>Seller</th>
                        <th>Buyer</th>
                        <th>Asset</th>
                        <th>Amount</th>
                        <th>Rate</th>
                        <th>Status</th>
                        <th>Fee</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Trades will be dynamically inserted here -->
                </tbody>
            </table>
        </div>
    </section>

    <script>
        // Section navigation
        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = '';
            if (id === 'dashboard') document.getElementById('dashboard').classList.add('active');
            else document.getElementById('dashboard').classList.remove('active');
        }

        // Referral copy
        function copyReferral() {
            const ref = document.getElementById('refLink');
            ref.select();
            ref.setSelectionRange(0, 99999);
            document.execCommand('copy');
            document.getElementById('copyMsg').style.display = 'block';
            setTimeout(() => document.getElementById('copyMsg').style.display = 'none', 1500);
        }

        // Simple login/signup simulation with OTP
        let loggedIn = false, username = '', isAdmin = false;
        let users = [{username: 'admin', password: 'admin123', email: 'tvic5321@gmail.com', phone: '+2347013384963', isAdmin: true}];

        function sendOTP(target) {
            // Simulate sending OTP
            document.getElementById(target).style.display = 'block';
            setTimeout(() => document.getElementById(target).style.display = 'none', 2000);
        }

        function login(e) {
            e.preventDefault();
            const user = document.getElementById('loginUser').value;
            const pass = document.getElementById('loginPass').value;
            const otp = document.getElementById('loginOTP').value;
            const found = users.find(u => u.username === user && u.password === pass);
            if (!found) {
                alert('Invalid credentials.');
                return;
            }
            if (otp !== '123456') {
                alert('Invalid OTP.');
                sendOTP('otpMsg');
                return;
            }
            username = user;
            loggedIn = true;
            isAdmin = !!found.isAdmin;
            document.getElementById('userDisplay').textContent = username;
            document.getElementById('logoutBtn').style.display = '';
            document.getElementById('adminBtn').style.display = isAdmin ? '' : 'none';
            showSection('dashboard');
        }
        function signup(e) {
            e.preventDefault();
            const user = document.getElementById('signupUser').value;
            const email = document.getElementById('signupEmail').value;
            const phone = document.getElementById('signupPhone').value;
            const pass = document.getElementById('signupPass').value;
            const otp = document.getElementById('signupOTP').value;
            if (users.find(u => u.username === user)) {
                alert('Username already exists.');
                return;
            }
            if (otp !== '123456') {
                alert('Invalid OTP.');
                sendOTP('signupOtpMsg');
                return;
            }
            users.push({username: user, password: pass, email, phone, isAdmin: false});
            username = user;
            loggedIn = true;
            isAdmin = false;
            document.getElementById('userDisplay').textContent = username;
            document.getElementById('logoutBtn').style.display = '';
            document.getElementById('adminBtn').style.display = 'none';
            showSection('dashboard');
        }
        function logout() {
            loggedIn = false;
            username = '';
            isAdmin = false;
            document.getElementById('logoutBtn').style.display = 'none';
            document.getElementById('adminBtn').style.display = 'none';
            showSection('home');
        }

        // Bank management
        let banks = [];
        function showBank() {
            document.getElementById('bankList').style.display = '';
            document.getElementById('withdrawSection').style.display = 'none';
            renderBanks();
        }
        function addBank(e) {
            e.preventDefault();
            const name = document.getElementById('bankName').value;
            const acc = document.getElementById('bankAcc').value;
            banks.push({name, acc});
            renderBanks();
            document.getElementById('bankName').value = '';
            document.getElementById('bankAcc').value = '';
        }
        function renderBanks() {
            const ul = document.getElementById('banks');
            ul.innerHTML = '';
            banks.forEach(b => {
                const li = document.createElement('li');
                li.textContent = `${b.name} - ${b.acc}`;
                ul.appendChild(li);
            });
            // Update withdraw bank select
            const sel = document.getElementById('withdrawBank');
            sel.innerHTML = '<option value="">Select Bank</option>';
            banks.forEach((b, i) => {
                const opt = document.createElement('option');
                opt.value = i;
                opt.textContent = `${b.name} - ${b.acc}`;
                sel.appendChild(opt);
            });
        }

        // Withdraw
        function showWithdraw() {
            document.getElementById('withdrawSection').style.display = '';
            document.getElementById('bankList').style.display = 'none';
            renderBanks();
        }
        function withdraw(e) {
            e.preventDefault();
            const amt = document.getElementById('withdrawAmount').value;
            const bankIdx = document.getElementById('withdrawBank').value;
            if (bankIdx === '') {
                alert('Please select a bank.');
                return;
            }
            alert(`Withdrawal of ${amt} to ${banks[bankIdx].name} - ${banks[bankIdx].acc} initiated!`);
            document.getElementById('withdrawAmount').value = '';
        }

        // P2P Marketplace logic
        let offers = [];
        let trades = [];
        let platformEarnings = 0;

        function showListForm() {
            const form = document.getElementById('listForm');
            form.style.display = form.style.display === 'none' ? '' : 'none';
        }

        function listOffer(e) {
            e.preventDefault();
            if (!loggedIn) {
                alert('Login to list an offer.');
                return;
            }
            const asset = document.getElementById('asset').value;
            const amount = document.getElementById('amount').value;
            const rate = document.getElementById('rate').value;
            const payment = document.getElementById('payment').value;
            const seller = username || 'Guest';
            offers.push({
                seller,
                asset,
                amount,
                rate,
                payment,
                time: Date.now()
            });
            renderOffers();
            e.target.reset();
            document.getElementById('listForm').style.display = 'none';
        }

        function renderOffers() {
            const tbody = document.getElementById('offersTable').querySelector('tbody');
            tbody.innerHTML = '';
            offers.forEach((offer, idx) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${offer.seller}</td>
                    <td>${offer.asset}</td>
                    <td>${offer.amount}</td>
                    <td>${offer.rate}</td>
                    <td>${offer.payment}</td>
                    <td>
                        <button class="cta-btn" onclick="initiateTrade(${idx})">Buy</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function initiateTrade(idx) {
            if (!loggedIn) {
                alert('Login to initiate a trade.');
                return;
            }
            const offer = offers[idx];
            const tradeId = Math.random().toString(36).substr(2, 8);
            const fee = Math.round(offer.amount * 0.15 * 100) / 100;
            const trade = {
                id: tradeId,
                seller: offer.seller,
                buyer: username,
                asset: offer.asset,
                amount: offer.amount,
                rate: offer.rate,
                status: 'Pending',
                fee: fee,
                timer: 1200 // 20 minutes in seconds
            };
            trades.push(trade);
            platformEarnings += fee;
            renderAllTrades();
            updatePlatformEarnings();
            alert(
                `Trade started with ${offer.seller} for ${offer.amount} ${offer.asset} at ${offer.rate}.\n\n` +
                `Payment methods: ${offer.payment}\n\n` +
                `You have 20 minutes to complete this trade. Trade ID: ${tradeId}\n\n` +
                `15% platform fee applies.`
            );
            startTradeTimer(tradeId);
        }

        function renderAllTrades() {
            const tbody = document.getElementById('allTradesTable').querySelector('tbody');
            tbody.innerHTML = '';
            trades.forEach(trade => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${trade.id}</td>
                    <td>${trade.seller}</td>
                    <td>${trade.buyer}</td>
                    <td>${trade.asset}</td>
                    <td>${trade.amount}</td>
                    <td>${trade.rate}</td>
                    <td>${trade.status} <span class="timer" id="timer-${trade.id}"></span></td>
                    <td>â‚¦${trade.fee}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function updatePlatformEarnings() {
            document.getElementById('platformEarnings').textContent = `â‚¦${platformEarnings}`;
        }

        function startTradeTimer(tradeId) {
            let trade = trades.find(t => t.id === tradeId);
            if (!trade) return;
            function update() {
                if (trade.status !== 'Pending') return;
                if (trade.timer <= 0) {
                    trade.status = 'Cancelled';
                    renderAllTrades();
                    return;
                }
                const min = Math.floor(trade.timer / 60);
                const sec = trade.timer % 60;
                const timerEl = document.getElementById('timer-' + tradeId);
                if (timerEl) timerEl.textContent = ` (${min}:${sec < 10 ? '0' : ''}${sec})`;
                trade.timer--;
                setTimeout(update, 1000);
            }
            update();
        }

        // Contact CEO
        function contactCEO() {
            window.location.href = "mailto:tvic5321@gmail.com?subject=Buy%20Directly%20from%20CEO";
        }

        // Show dashboard/admin only if logged in
        document.addEventListener('DOMContentLoaded', () => {
            if (loggedIn) {
                document.getElementById('logoutBtn').style.display = '';
                document.getElementById('adminBtn').style.display = isAdmin ? '' : 'none';
                showSection('dashboard');
            } else {
                showSection('home');
            }
            renderOffers();
            renderAllTrades();
            updatePlatformEarnings();
        });
    </script>
</body>
</html>
